<?xml version="1.0" encoding="utf-8" ?>
<ContentView
    x:Class="ComboboxApp.Controls.AdvancedPickerOverlay.AdvancedPickerDropdown"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Name="RootControl"
    BackgroundColor="Transparent">

    <Border
        Margin="0"
        Padding="0"
        BackgroundColor="{AppThemeBinding Light=White,
                                          Dark=#1F1F1F}"
        HorizontalOptions="Fill"
        Stroke="#E0E0E0"
        StrokeThickness="1"
        VerticalOptions="Start">

        <Border.StrokeShape>
            <RoundRectangle CornerRadius="8" />
        </Border.StrokeShape>

        <Border.Shadow>
            <Shadow
                Brush="Black"
                Opacity="0.2"
                Radius="10"
                Offset="0,4" />
        </Border.Shadow>

        <Grid Padding="0" RowDefinitions="Auto, *">
            <!--  Buscador  -->
            <Border
                Grid.Row="0"
                Margin="0"
                Padding="10,5"
                BackgroundColor="{AppThemeBinding Light=#F5F5F5,
                                                  Dark=#2D2D2D}"
                Stroke="{Binding DropdownHeaderBorderColor}"
                StrokeThickness="1">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="{Binding DropdownHeaderCornerRadius}" />
                </Border.StrokeShape>
                <Entry
                    x:Name="SearchBox"
                    BackgroundColor="Transparent"
                    ClearButtonVisibility="WhileEditing"
                    Completed="OnSearchCompleted"
                    Focused="OnSearchFocused"
                    FontSize="14"
                    Placeholder="Buscar..."
                    PlaceholderColor="{AppThemeBinding Light=Gray,
                                                       Dark=#999999}"
                    ReturnType="Search"
                    TextChanged="OnSearchTextChanged"
                    TextColor="{AppThemeBinding Light=Black,
                                                Dark=White}"
                    Unfocused="OnSearchUnfocused" />
            </Border>

            <!--  Lista de Items  -->
            <CollectionView
                x:Name="FilteredList"
                Grid.Row="1"
                HeightRequest="200"
                SelectionMode="None"
                VerticalOptions="Start">
                <CollectionView.EmptyView>
                    <Label
                        Padding="20"
                        HorizontalOptions="Center"
                        Text="No hay resultados"
                        TextColor="Gray"
                        VerticalOptions="Center" />
                </CollectionView.EmptyView>
            </CollectionView>
        </Grid>
    </Border>
</ContentView>
